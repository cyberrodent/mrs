{"name":"Mrs","body":"Mrs - MySql Replication Setup\r\n=============================\r\nThe purpose of this project is to create a set of shell scripts that can aid in quickly setting up a master-master pair of mysql servers\r\non the same machine to aid in development and test environment setups.\r\n\r\nSooner or later this may be converted to a chef recipe.  \r\n\r\nOverview\r\n--------\r\nThe idea is to run 2 (or more) instances of MySql on one machine. The servers will share resources like CPU and RAM and IO. We will do this by having sets of configuration that utelize different TCP ports, unix sockets, data directories users, log files etc. \r\n\r\nThis uses one mysqld binary.\r\n\r\nApparmor\r\n--------\r\nIf you use apparmour then make sure to update the mysqld profile. This is appropriate for the default settings:\r\n  /opt/mysqlrplay/** rwk\r\n\r\nsetup-ab-sides.sh\r\n-----------------\r\nThis script will create a mysql server config file (my-x.cnf for any x)\r\n\r\nIt will then\r\n 1. create a data directory and \r\n 2. run mysql_install_db that that directory as a datadir.  \r\n 3. Then it will start up that mysql server and \r\n 4. create a replication user with the appropriate grants. \r\n 5. TODO: Optionally it can set the root user password as well.\r\n\r\nDefault is to setup each mysql under /opt/mysqlrplay with a simple layout:\r\n    ├── bin\r\n    │   ├── start-a.sh\r\n    │   ├── start-b.sh\r\n    │   ├── stop-a.sh\r\n    │   └── stop-b.sh\r\n    ├── data\r\n    │   ├── mysql-a/\r\n    │   └── mysql-b/\r\n    ├── etc\r\n    │   ├── my-a.cnf\r\n    │   └── my-b.cnf\r\n    ├── log\r\n    │   ├── a-error.log\r\n    │   └── b-error.log\r\n    ├── run\r\n    │   ├── mysql-a.pid\r\n    │   └── mysql-b.pid\r\n    ├── socket\r\n    └── tmp\r\n        ├── mysql-a/\r\n        └── mysql-b/\r\n    \r\nStart and stop scripts\r\n-----------------------\r\nEach configuration will require its own start and stop scripts to make it easy to start and stop that service. These will be called\r\nstart-a.sh, stop-a.sh, start-b.sh etc.\r\n\r\nstart_mm_pair.sh\r\n--\r\nTODO: Assumes 2 running mysql services (a and b) connect to both, show the master status, start the slaves and show the slave status.\r\n\r\nThat's it so far....more work to do.","tagline":"Mysql (Master-Master) Replication Setup ","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}